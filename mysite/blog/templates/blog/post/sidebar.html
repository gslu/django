{% load blog_tags %}
{% load static %}
<div id="sidebar">
    <div class="owner-img">
        <a href='{% url "blog:post_list" user.id %}'>
    {% if user.profile.image %}
        <img src="{{ MEDIA_URL }}{{ user.profile.image }}">
    {% else %}
        <img src='{% static "blog/img/user_default.jpeg" %}'>
    {% endif %}
        </a>
    </div>

    <h2 id="blogger">{{ user.profile.nickname }}</h2>
    <div class="follow">
    {% if auth_user.is_authenticated %}
    {% is_follower auth_user user as IsFollower %}
    {% if IsFollower %}
    <a id="follow-link" href="{% url "blog:edit_follow" user.id %}">
        <div id="followed">
            +关注 √
        </div>
    </a>

    {% else %}
    <a id="follow-link" href="{% url "blog:edit_follow" user.id %}">
        <div id="follow">
            +关注
        </div>
    </a>
    {% endif %}
    {% else %}
    <a id="follow-after-login" href="{% url "blog:user_login" %}">
        <div id="follow">
            +关注
        </div>
    </a>
    {% endif %}
    </div>
    <hr/>
    <div class="introduce">
        <p>个人简介<p>
        <div id="irdtext">
        {{ user.profile.introduce }}
        </div>
    </div>

    <hr/><br/>

    <div id="post-class">
        {% if auth_user.is_authenticated %}
            <div id="collection">
                <a href="">
                <div id="before"><img src='{% static "blog/img/collect.png" %}'></div>我收藏的文章
                </a>
            </div>
            <div id="care-topic">
                <a href="">
                <div id="before"><img src='{% static "blog/img/care.png" %}'></div>我收到的关注
                </a>
            </div>
        {% else %}
            <div id="collection">
                <a href="">
                <p><div id="before"><img src='{% static "blog/img/collect.png" %}'></div>Ta收藏的文章</p>
                </a>
            </div>
            <div id="care-topic">
                <a href="">
                <p><div id="before"><img src='{% static "blog/img/care.png" %}'></div>Ta收到的关注</p>
                </a>
            </div>
        {% endif %}
    </div>

    <!--
    <div id="post-class">
        <div id="self">
            {% post_count user "self" as self_count %}
            <p>{{ self_count }}</p>
            <p>原创</p>
        </div>

        <div id="reprint">
            {% post_count user "reprint" as reprint_count %}
            <p>{{ reprint_count }}</p>
            <p>转载</p>
        </div>

        <div id="collection">
            {% post_count user "collect" as collect_count %}
            <p>{{ collect_count }}</p>
            <p>收藏</p>
        </div>
    </div>
    -->
    <h3>最新文章</h3>
    {% get_latest_posts user 4 as latest_posts %}
    <ul class="last-post">
        {% for post in latest_posts %}
        <li>
            <a href="{{ post.get_absolute_url }}"><div id="before"><img src='{% static "blog/img/post.png" %}'></div>{{ post.title }}</a>
        </li>
        {% endfor %}
    </ul>
<!--
    <h3>按浏览</h3>
    {% get_most_access_posts user 3 as most_access_posts %}
    <ul>
        {% for post in most_access_posts %}
        <li>
            <a href="{{ post.get_absolute_url }}">{{ post.title }}</a>
        </li>
        {% endfor %}
    </ul>

    <h3>按评论</h3>
    {% get_most_commented_posts user 3 as most_commented_posts %}
    <ul>
        {% for post in most_commented_posts %}
        <li>
            <a href="{{ post.get_absolute_url }}">{{ post.title }}</a>
        </li>
        {% endfor %}
    </ul>
-->
</div>
